import{S as N,i as j,s as z,k,l as $,m as D,h,n as _,b as y,I as P,a as E,c as S,K as O,L as Y,M as Z,q as R,r as T,E as v,u as C,N as pe,C as de,F as _e,G as he,H as me,g as w,d as V,y as ee,z as te,A as le,f as se,B as re,J as ge,e as U,O as H,P as F,v as ie,Q as oe,R as ne,T as ae,U as be}from"../chunks/index.8201ef28.js";import{w as ce}from"../chunks/index.155317fc.js";function fe(a){var e,t,l="";if(typeof a=="string"||typeof a=="number")l+=a;else if(typeof a=="object")if(Array.isArray(a))for(e=0;e<a.length;e++)a[e]&&(t=fe(a[e]))&&(l&&(l+=" "),l+=t);else for(e in a)a[e]&&(l&&(l+=" "),l+=e);return l}function L(){for(var a,e,t=0,l="";t<arguments.length;)(a=arguments[t++])&&(e=fe(a))&&(l&&(l+=" "),l+=e);return l}const A=ce(),M=ce([]);function q(a,e,t){const l=a.slice();return l[1]=e[t],l}function x(a){var i,n;let e,t,l,s=((n=(i=a[0])==null?void 0:i.Ratings)==null?void 0:n.length)>0&&G(a);return{c(){s&&s.c(),e=E(),t=k("img"),this.h()},l(r){s&&s.l(r),e=S(r),t=$(r,"IMG",{src:!0,width:!0,height:!0,class:!0,alt:!0}),this.h()},h(){O(t.src,l=a[0].Poster)||_(t,"src",l),_(t,"width","160vw"),_(t,"height","auto"),_(t,"class","rounded"),_(t,"alt","Movie poster")},m(r,o){s&&s.m(r,o),y(r,e,o),y(r,t,o)},p(r,o){var c,f;((f=(c=r[0])==null?void 0:c.Ratings)==null?void 0:f.length)>0?s?s.p(r,o):(s=G(r),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),o&1&&!O(t.src,l=r[0].Poster)&&_(t,"src",l)},d(r){s&&s.d(r),r&&h(e),r&&h(t)}}}function G(a){let e,t=[],l=new Map,s=a[0].Ratings;const i=n=>n[1].Source;for(let n=0;n<s.length;n+=1){let r=q(a,s,n),o=i(r);l.set(o,t[n]=K(o,r))}return{c(){e=k("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=$(n,"DIV",{class:!0});var r=D(e);for(let o=0;o<t.length;o+=1)t[o].l(r);r.forEach(h),this.h()},h(){_(e,"class","text-left rounded bg-gradient-to-br mb-2 from-teal-300 to-lime-300 p-1 shadow-md")},m(n,r){y(n,e,r);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,r){r&1&&(s=n[0].Ratings,t=Y(t,r,i,1,n,s,l,e,Z,K,null,q))},d(n){n&&h(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function K(a,e){let t,l=e[1].Source+"",s,i,n=e[1].Value+"",r;return{key:a,first:null,c(){t=k("div"),s=R(l),i=R(": "),r=R(n),this.h()},l(o){t=$(o,"DIV",{class:!0});var c=D(t);s=T(c,l),i=T(c,": "),r=T(c,n),c.forEach(h),this.h()},h(){_(t,"class","font-bold"),this.first=t},m(o,c){y(o,t,c),v(t,s),v(t,i),v(t,r)},p(o,c){e=o,c&1&&l!==(l=e[1].Source+"")&&C(s,l),c&1&&n!==(n=e[1].Value+"")&&C(r,n)},d(o){o&&h(t)}}}function ve(a){var l;let e,t=a[0]&&((l=a[0])==null?void 0:l.Poster)!=="N/A"&&x(a);return{c(){e=k("div"),t&&t.c(),this.h()},l(s){e=$(s,"DIV",{class:!0});var i=D(e);t&&t.l(i),i.forEach(h),this.h()},h(){_(e,"class","flex flex-col justify-center items-center mt-12")},m(s,i){y(s,e,i),t&&t.m(e,null)},p(s,[i]){var n;s[0]&&((n=s[0])==null?void 0:n.Poster)!=="N/A"?t?t.p(s,i):(t=x(s),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:P,o:P,d(s){s&&h(e),t&&t.d()}}}function ye(a,e,t){let l=null;return A.subscribe(async s=>{if(s){const n=await(await fetch(`http://www.omdbapi.com/?apikey=cfebe6e7&i=${s.imdbID}&type=episode`)).json();n.Response==="True"&&t(0,l=n)}}),[l]}class ke extends N{constructor(e){super(),j(this,e,ye,ve,z,{})}}function $e(a){const e=a-1;return e*e*e+1}function we(a,{delay:e=0,duration:t=400,easing:l=pe}={}){const s=+getComputedStyle(a).opacity;return{delay:e,duration:t,easing:l,css:i=>`opacity: ${i*s}`}}function ue(a,{delay:e=0,duration:t=400,easing:l=$e,axis:s="y"}={}){const i=getComputedStyle(a),n=+i.opacity,r=s==="y"?"height":"width",o=parseFloat(i[r]),c=s==="y"?["top","bottom"]:["left","right"],f=c.map(m=>`${m[0].toUpperCase()}${m.slice(1)}`),p=parseFloat(i[`padding${f[0]}`]),u=parseFloat(i[`padding${f[1]}`]),b=parseFloat(i[`margin${f[0]}`]),g=parseFloat(i[`margin${f[1]}`]),d=parseFloat(i[`border${f[0]}Width`]),I=parseFloat(i[`border${f[1]}Width`]);return{delay:e,duration:t,easing:l,css:m=>`overflow: hidden;opacity: ${Math.min(m*20,1)*n};${r}: ${m*o}px;padding-${c[0]}: ${m*p}px;padding-${c[1]}: ${m*u}px;margin-${c[0]}: ${m*b}px;margin-${c[1]}: ${m*g}px;border-${c[0]}-width: ${m*d}px;border-${c[1]}-width: ${m*I}px;`}}function Ie(a){let e,t;const l=a[1].default,s=de(l,a,a[0],null);return{c(){e=k("div"),s&&s.c(),this.h()},l(i){e=$(i,"DIV",{class:!0});var n=D(e);s&&s.l(n),n.forEach(h),this.h()},h(){_(e,"class","ui svelte-1b3i4ka")},m(i,n){y(i,e,n),s&&s.m(e,null),t=!0},p(i,[n]){s&&s.p&&(!t||n&1)&&_e(s,l,i,i[0],t?me(l,i[0],n,null):he(i[0]),null)},i(i){t||(w(s,i),t=!0)},o(i){V(s,i),t=!1},d(i){i&&h(e),s&&s.d(i)}}}function De(a,e,t){let{$$slots:l={},$$scope:s}=e;return a.$$set=i=>{"$$scope"in i&&t(0,s=i.$$scope)},[s,l]}class Ee extends N{constructor(e){super(),j(this,e,De,Ie,z,{})}}function W(a,e,t){const l=a.slice();return l[12]=e[t],l[14]=t,l}function B(a){let e,t=a[1].Error+"",l,s,i,n;return{c(){e=k("div"),l=R(t)},l(r){e=$(r,"DIV",{});var o=D(e);l=T(o,t),o.forEach(h)},m(r,o){y(r,e,o),v(e,l),n=!0},p(r,o){(!n||o&2)&&t!==(t=r[1].Error+"")&&C(l,t)},i(r){n||(ne(()=>{n&&(i&&i.end(1),s=ae(e,ue,{}),s.start())}),n=!0)},o(r){s&&s.invalidate(),i=be(e,we,{}),n=!1},d(r){r&&h(e),r&&i&&i.end()}}}function J(a){let e,t=[],l=new Map,s,i=a[0];const n=r=>r[12].imdbID;for(let r=0;r<i.length;r+=1){let o=W(a,i,r),c=n(o);l.set(c,t[r]=Q(c,o))}return{c(){e=k("ul");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=$(r,"UL",{class:!0,role:!0});var o=D(e);for(let c=0;c<t.length;c+=1)t[c].l(o);o.forEach(h),this.h()},h(){_(e,"class","shadow-lg list-none m-0 min-w-full overflow-y-auto z-50 rounded"),_(e,"role","listbox")},m(r,o){y(r,e,o);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null)},p(r,o){o&105&&(i=r[0],t=Y(t,o,n,1,r,i,l,e,Z,Q,null,W))},i(r){s||ne(()=>{s=ae(e,ue,{}),s.start()})},o:P,d(r){r&&h(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function Q(a,e){let t,l=e[12].Title+"",s,i,n,r,o,c;function f(){return e[8](e[12])}return{key:a,first:null,c(){t=k("li"),s=R(l),i=E(),this.h()},l(p){t=$(p,"LI",{id:!0,class:!0});var u=D(t);s=T(u,l),i=S(u),u.forEach(h),this.h()},h(){_(t,"id",n=e[12].imdbID),_(t,"class",r=L("hover:bg-green-300 text-xl font-bold text-gray-800 flex justify-center items-center py-1 hover:cursor-pointer",e[3]===e[14]&&"bg-green-300")),this.first=t},m(p,u){y(p,t,u),v(t,s),v(t,i),o||(c=[F(t,"click",f),F(t,"keydown",e[9])],o=!0)},p(p,u){e=p,u&1&&l!==(l=e[12].Title+"")&&C(s,l),u&1&&n!==(n=e[12].imdbID)&&_(t,"id",n),u&9&&r!==(r=L("hover:bg-green-300 text-xl font-bold text-gray-800 flex justify-center items-center py-1 hover:cursor-pointer",e[3]===e[14]&&"bg-green-300"))&&_(t,"class",r)},d(p){p&&h(t),o=!1,oe(c)}}}function Se(a){let e,t,l,s,i,n,r,o=a[1]&&B(a),c=a[2]&&J(a);return{c(){e=k("input"),t=E(),o&&o.c(),l=E(),c&&c.c(),s=U(),this.h()},l(f){e=$(f,"INPUT",{class:!0,type:!0,autocapitalize:!0,autocomplete:!0,placeholder:!0,spellcheck:!0,"aria-autocomplete":!0}),t=S(f),o&&o.l(f),l=S(f),c&&c.l(f),s=U(),this.h()},h(){_(e,"class","tracking-wider shadow-sm px-4 py-2 rounded-full w-full text-center"),_(e,"type","text"),_(e,"autocapitalize","none"),_(e,"autocomplete","off"),_(e,"placeholder","Title of movie or show"),_(e,"spellcheck","false"),_(e,"aria-autocomplete","list")},m(f,p){y(f,e,p),H(e,a[4]),y(f,t,p),o&&o.m(f,p),y(f,l,p),c&&c.m(f,p),y(f,s,p),i=!0,n||(r=[F(e,"input",a[7]),F(e,"keyup",a[5])],n=!0)},p(f,p){p&16&&e.value!==f[4]&&H(e,f[4]),f[1]?o?(o.p(f,p),p&2&&w(o,1)):(o=B(f),o.c(),w(o,1),o.m(l.parentNode,l)):o&&(ie(),V(o,1,1,()=>{o=null}),se()),f[2]?c?(c.p(f,p),p&4&&w(c,1)):(c=J(f),c.c(),w(c,1),c.m(s.parentNode,s)):c&&(c.d(1),c=null)},i(f){i||(w(o),w(c),i=!0)},o(f){V(o),i=!1},d(f){f&&h(e),f&&h(t),o&&o.d(f),f&&h(l),c&&c.d(f),f&&h(s),n=!1,oe(r)}}}function X(a){let e,t;return e=new ke({}),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,s){le(e,l,s),t=!0},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){re(e,l)}}}function Re(a){let e,t,l,s,i,n,r,o,c,f,p;c=new Ee({props:{$$slots:{default:[Se]},$$scope:{ctx:a}}});let u=!a[2]&&X();return{c(){e=k("div"),t=k("h1"),l=R("How good was it really?"),s=E(),i=k("div"),n=R("Search for your favorite movie or tv series and see the rating"),r=E(),o=k("div"),ee(c.$$.fragment),f=E(),u&&u.c(),this.h()},l(b){e=$(b,"DIV",{class:!0});var g=D(e);t=$(g,"H1",{class:!0});var d=D(t);l=T(d,"How good was it really?"),d.forEach(h),s=S(g),i=$(g,"DIV",{class:!0});var I=D(i);n=T(I,"Search for your favorite movie or tv series and see the rating"),I.forEach(h),r=S(g),o=$(g,"DIV",{class:!0});var m=D(o);te(c.$$.fragment,m),m.forEach(h),f=S(g),u&&u.l(g),g.forEach(h),this.h()},h(){_(t,"class","text-5xl font-extrabold text-gray-800"),_(i,"class","text-gray-500 font-bold"),_(o,"class","flex flex-col mt-12 mx-auto"),_(e,"class","flex-1 text-center my-16")},m(b,g){y(b,e,g),v(e,t),v(t,l),v(e,s),v(e,i),v(i,n),v(e,r),v(e,o),le(c,o,null),v(e,f),u&&u.m(e,null),p=!0},p(b,[g]){const d={};g&32799&&(d.$$scope={dirty:g,ctx:b}),c.$set(d),b[2]?u&&(ie(),V(u,1,1,()=>{u=null}),se()):u?g&4&&w(u,1):(u=X(),u.c(),w(u,1),u.m(e,null))},i(b){p||(w(c.$$.fragment,b),w(u),p=!0)},o(b){V(c.$$.fragment,b),V(u),p=!1},d(b){b&&h(e),re(c),u&&u.d()}}}function Te(a,e,t){let l,s,i,n;ge(a,M,d=>t(0,n=d));let r=null;A.subscribe(d=>{d&&t(4,l=d.Title)});const o=async d=>{const m=await(await fetch(`http://www.omdbapi.com/?apikey=cfebe6e7&s=${d}`)).json();return m.Response==="True"?(t(1,r=null),m.Search):(t(1,r={Response:m.Response,Error:m.Error}),[])},c=()=>{M.set([]),t(1,r=null)},f=async d=>{if(d.key==="ArrowUp")d.preventDefault(),t(3,i=Math.max(i-1,0));else if(d.key==="ArrowDown")d.preventDefault(),t(3,i=Math.min(i+1,n.length-1));else if(d.key==="Enter"&&i!==-1){d.preventDefault();const I=n[i];I&&p(I.imdbID)}else d.key==="Escape"||d.key==="Tab"?(d.preventDefault(),t(2,s=!1)):(l.trim()===""&&c(),l.length>2&&(M.set(await o(l)),t(3,i=-1)))},p=d=>{const I=n.find(m=>m.imdbID===d);I&&A.set(I),t(2,s=!1)};function u(){l=this.value,t(4,l)}const b=d=>p(d.imdbID),g=d=>f(d);return a.$$.update=()=>{a.$$.dirty&1&&t(2,s=n.length>0)},t(4,l=""),t(3,i=-1),[n,r,s,i,l,f,p,u,b,g]}class Fe extends N{constructor(e){super(),j(this,e,Te,Re,z,{})}}export{Fe as component};
